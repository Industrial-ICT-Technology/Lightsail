{% load static %}

<div id="header">
  <header class="header-title primary-bg">
    <div class="login_signup">
      {% if user.is_authenticated %} <!--로그인 한 상태-->
        <div class="user-profile-login">

            {% comment %} <img src="{{ user.profile.image.url }}" class="profile-img"> {% endcomment %}

            <strong class="user-profile-name">
                <div id="my_profile" class="my_profile" onclick="usermodal()">{{ user.username }}</div>
                <div id="my_profile_modal" class="my_profile_modal">
                  <div class="modal_img"><img src="{{ user.profile.image.url }}" class="profile-img"></div>
                  <div class="modal_name">{{ user.username }}</div>
                </div>
            </strong>

          <a href="{% url 'mainapp:account' user.pk %}" class="mypage-img">
              <img src="{% static 'images/setting.svg' %}" alt="Mypage" >
          </a>

          <a href="{% url 'mainapp:logout' %}" class="logout_btn">Logout</a>
        {% else %} <!--로그인 안한 상태-->
        <a href="{% url 'mainapp:login' %}?next={{ request.path }}" class="login_btn">Login</a>
        <a href="{% url 'mainapp:signup' %}?next={{ request.path }}" class="signup_btn">SignUp</a>
      {% endif %}
    </div>
  </header>
</div>



<script>
  function usermodal(){
    const usermodal = document.getElementById('my_profile_modal');
    usermodal.style.scale = "1";
  }

  document.addEventListener('click', function(event) {
    // 이벤트가 발생한 요소
    var target = event.target;

    // 이벤트 대상 요소가 div#main 요소 영역 외부에 존재하는 경우
    if (!my_profile.contains(target) && !my_profile_modal.contains(target)) {
      // 이벤트 처리 로직을 작성합니다.
      const usermodal = document.getElementById('my_profile_modal');
    usermodal.style.scale = "0";
    }
  });

  
  
</script>